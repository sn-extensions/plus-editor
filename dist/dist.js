document.addEventListener("DOMContentLoaded",(function(){let e,t,n,o,i,a=!1,r=!0,l=!1;const c=["address","article","aside","blockquote","details","dialog","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","ol","p","pre","section","table","ul"].join(", ");function m(){if(t){const i=t;e.saveItemWithPresave(i,(()=>{o=$("#summernote").summernote("code"),i.clientData=n,i.content.text=o,i.content.preview_plain=function(e,t=90){return e.length<=t?e:e.substring(0,t)+"..."}(function(e){const t=document.implementation.createHTMLDocument("New").body;return t.innerHTML=e,t.textContent||t.innerText||""}(o)),i.content.preview_html=null}))}}$("#summernote").summernote({height:500,minHeight:null,maxHeight:null,focus:!0,tabDisable:!0,showDomainOnlyForAutolink:!1,toolbar:[["para",["style"]],["style",["bold","italic","underline","strikethrough","clear"]],["fontsize",["fontsize","fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["insert",["table","link","hr","picture","video"]],["misc",["codeview","help"]]],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Monospace","Roboto","system-ui","Tahoma","Times New Roman","Verdana"],callbacks:{onInit:function(){},onImageUpload:function(){alert("Until we can encrypt image files, uploads are not currently supported. We recommend using the Image button in the toolbar and copying an image URL instead.")}},codeviewFilter:!0}),$("#summernote").on("summernote.change",(function(){document.querySelectorAll(c).forEach((e=>e.setAttribute("dir","auto"))),a||m()})),$("textarea.note-codable").on("input",(()=>{m()})),e=new ComponentRelay({initialPermissions:[{name:"stream-context-item"}],targetWindow:window,onReady:()=>{const t=e.platform;t&&document.body.classList.add(t)}}),e.streamContextItem((e=>{!function(e){if(e.uuid!==i&&(o=null,r=!0,i=e.uuid),t=e,e.isMetadataUpdate)return;n=e.clientData;let c=filterXSS(e.content.text);if(c==o)return;const m=$("#summernote");if(m){a=!0;const e=/<[a-z][\s\S]*>/i.test(c);l||($("#summernote").summernote("fullscreen.toggle"),l=!0),r&&!e&&(c=((c||"")+"").replace(/\t/g,"    ").replace(/\r\n|\r|\n/g,"<br />")),m.summernote("code",c),r&&($("#summernote").summernote("commit"),r=!1),a=!1}}(e)}))}));
//# sourceMappingURL=dist.js.map