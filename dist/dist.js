document.addEventListener("DOMContentLoaded",(function(){let e,t,n,o,i,r=!1,a=!0,c=!1;const s=["address","article","aside","blockquote","details","dialog","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","ol","p","pre","section","table","ul"].join(", ");function u(){if(t){const i=t;e.saveItemWithPresave(i,(()=>{o=$("#summernote").summernote("code"),i.clientData=n,i.content.text=DOMPurify.sanitize(o),i.content.preview_plain=function(e,t=90){return e.length<=t?e:e.substring(0,t)+"..."}(function(e){const t=document.implementation.createHTMLDocument("New").body;return t.innerHTML=e,t.textContent||t.innerText||""}(o)),i.content.preview_html=null}))}}$("#summernote").summernote({height:500,minHeight:null,maxHeight:null,focus:!0,tabDisable:!0,showDomainOnlyForAutolink:!1,toolbar:[["para",["style"]],["style",["bold","italic","underline","strikethrough","clear"]],["fontsize",["fontsize","fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["insert",["table","link","hr","picture","video"]],["misc",["custom-codeview","help"]]],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Monospace","Roboto","system-ui","Tahoma","Times New Roman","Verdana"],callbacks:{onInit:function(){},onImageUpload:function(){alert("Until we can encrypt image files, uploads are not currently supported. We recommend using the Image button in the toolbar and copying an image URL instead.")}},codeviewFilter:!0,buttons:{"custom-codeview":function(e){return $.summernote.ui.button({contents:'<i class="note-icon-code"/>',tooltip:"Code View",codeviewButton:!0,click:function(){if($("#summernote").summernote("codeview.isActivated")){const e=$("#summernote").summernote("code"),t=DOMPurify.sanitize(e);$("#summernote").summernote("code",t)}e.invoke("codeview.toggle")}}).render()}}}),$("#summernote").on("summernote.change",(function(){document.querySelectorAll(s).forEach((e=>e.setAttribute("dir","auto"))),r||u()})),$("textarea.note-codable").on("input",(()=>{u()})),e=new ComponentRelay({initialPermissions:[{name:"stream-context-item"}],targetWindow:window,onReady:()=>{const t=e.platform;t&&document.body.classList.add(t)}}),e.streamContextItem((e=>{!function(e){if(e.uuid!==i&&(o=null,a=!0,i=e.uuid),t=e,e.isMetadataUpdate)return;n=e.clientData;let s=DOMPurify.sanitize(e.content.text);if(s==o)return;const u=$("#summernote");if(u){r=!0;const e=/<[a-z][\s\S]*>/i.test(s);c||($("#summernote").summernote("fullscreen.toggle"),c=!0),a&&!e&&(s=((s||"")+"").replace(/\t/g,"    ").replace(/\r\n|\r|\n/g,"<br />")),u.summernote("code",s),a&&($("#summernote").summernote("commit"),a=!1),r=!1}}(e)}))}));
//# sourceMappingURL=dist.js.map